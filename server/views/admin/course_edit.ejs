<%- include('./nav.ejs') %>
<body>
	<div class="alert alert-success fade show" style="display:none" id="successi">
		Successfully Edited Course Info
	</div>
	<div class="alert alert-success fade show" style="display:none" id="successm">
		Successfully Edited Course meeting
	</div>
	<div class="container pt-4 pb-5">
		<div class="row">
			<div class="col-10 d-flex aligns-items-center">
				<h3 class="mb-0" style="display: inline"><%=c.courseCode%>-<%= c.classNum %></h3>
				<input
					style="display: inline"
					class="ps-3 text-muted"
					value="<%=c.courseName%>"
				/>
			</div>
			<div class="col-2 d-flex aligns-items-center justify-content-end">
				<button class="btn btn-sm btn-primary" id=<%=c._id%> name="editi">Save Changes</button>
			</div>
		</div>
		<hr class="my-2" />
		<div class="row d-flex aligns-items-center justify-content-center mb-1">
			<textarea style="width: 95%"><%=c.description%></textarea>
		</div>

    	<table class="table">
    		<thead>
    			<tr>
    				<th scope="col">Instructor</th>
    				<th scope="col">Seats</th>
    				<th scope="col">Venue</th>
    			</tr>
    		</thead>
    		<tbody>
    			<tr>
    				<td>
    					<input
    						type="text"
    						class="form-control"
    						value="<%=c.instructor%>"
    						
    					/>
    				</td>
    				<td>
    					<input
    						type="text"
    						class="form-control"
    						value="<%=c.seat%>"
    						
    					/>
    				</td>
    				<td>
    					<input
    						type="text"
    						class="form-control"
    						value="<%=c.venue%>"
    						
    					/>
    				</td>
    			</tr>
    		</tbody>
    	</table>
		<div class="row mb-1">
			<div class="col-10 d-flex aligns-items-center">
				<h4 class="text-muted" style="display: inline">Meetings</h4>
				<button class="btn btn-link btn-floating" type="button" id="add">
					<i class="fa-solid fa-plus"></i>
				</button>
			</div>
			<div class="col-2 d-flex aligns-items-center justify-content-end">
				<button class="btn btn-sm btn-primary float-end" id=<%=c._id%> name="editm">Save Changes</button>
			</div>
		</div>
    	
    	<table class="table">
    		<thead>
    			<tr>
    				<th scope="col">Weekday</th>
    				<th scope="col">Start</th>
					<th scope="col">End</th>
    				<th scope="col">Dates</th>
    				<th scope="col">Action</th>
    			</tr>
    		</thead>
    		<% var weekdays = ["Monday", "Tuesday", "Wednesday",
    		"Thursday", "Friday", "Saturday","Sunday"] %>
    		<tbody id="meetbody">
    			<% for (let meeting of c.meetings) { %>
    			<tr>
    				<td>
    					<div class="form">
							<select class="form-select form-select-lg" type="select">
								<% for (let i=0; i<7; i++){ %>
									<option  value=<%= i %> <%if (meeting.day==i){ %>selected<% } %>>
										<%= weekdays[i] %>
									</option>
								<% } %>
							</select>
						</div>
    				</td>
    				<td>
    					<input
    						type="text"
    						class="form-control"
    						value="<%=meeting.start%>"
    						
    					/>
    				</td>
					<td>
    					<input
    						type="text"
    						class="form-control"
    						value="<%=meeting.end%>"
    						
    					/>
    				</td>
    				<td>
    					<input name="date"
    						type="text"
    						class="form-control"
    						value="<%=meeting.dates%>"
    					/>
    				</td>
    				<td>
    					<button
    						class="btn btn-danger btn-rounded btn-sm fw-bold"
    						type="button"
							name="del"
    					>
    						Delete
    					</button>
    				</td>
    			</tr>
    			<%}%>
    		</tbody>
    	</table>
    	<div class="float-center d-flex justify-content-center">
    		<button class="btn btn-link">back</button>
    	</div>
    </div>
</body>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.2.0/mdb.min.js"></script>
<script>
	$("#add").click(()=>{
		$("#meetbody").append(
			`<tr>
    				<td>
    					<div class="form">
							<select class="form-select form-select-lg" type="select">
								<% for (let i=0; i<7; i++){ %>
									<option  value=<%= i %>>
										<%= weekdays[i] %>
									</option>
								<% } %>
							</select>
						</div>
    				</td>
    				<td>
    					<input
    						type="text"
    						class="form-control"
    						value=""
    						
    					/>
    				</td>
					<td>
    					<input
    						type="text"
    						class="form-control"
    						value=""
    						
    					/>
    				</td>
    				<td>
    					<input
							name="date"
    						type="text"
    						class="form-control"
    						value=""
    						
    					/>
    				</td>
    				<td>
    					<button
    						class="btn btn-danger btn-rounded btn-sm fw-bold"
    						type="button"
							name="del"
    					>
    						Delete
    					</button>
    				</td>
    			</tr>
			`
		)
		$("[name='del']").click(function() {
  			$(this).closest("tr").remove();
		});
		
	});
	$("[name='del']").click(function() {
  			$(this).closest("tr").remove();
	});
	$("[name='date']").click(function() {
			console.log("click");
		});
</script>
<%- include('./nav_end.ejs') %>
